(()=>{var te=Object.create;var B=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var C=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(l,s)=>(typeof require<"u"?require:l)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var le=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports);var ae=(e,l,s,c)=>{if(l&&typeof l=="object"||typeof l=="function")for(let g of oe(l))!re.call(e,g)&&g!==s&&B(e,g,{get:()=>l[g],enumerable:!(c=ne(l,g))||c.enumerable});return e};var ce=(e,l,s)=>(s=e!=null?te(ie(e)):{},ae(l||!e||!e.__esModule?B(s,"default",{value:e,enumerable:!0}):s,e));var U=le((G,j)=>{(function(e){typeof G=="object"&&typeof j<"u"?j.exports=e():typeof define=="function"&&define.amd?define([],e):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).basicLightbox=e()})(function(){return function e(l,s,c){function g(d,u){if(!s[d]){if(!l[d]){var y=typeof C=="function"&&C;if(!u&&y)return y(d,!0);if(L)return L(d,!0);var f=new Error("Cannot find module '"+d+"'");throw f.code="MODULE_NOT_FOUND",f}var n=s[d]={exports:{}};l[d][0].call(n.exports,function(p){return g(l[d][1][p]||p)},n,n.exports,e,l,s,c)}return s[d].exports}for(var L=typeof C=="function"&&C,a=0;a<c.length;a++)g(c[a]);return g}({1:[function(e,l,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.create=s.visible=void 0;var c=function(a){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1],u=document.createElement("div");return u.innerHTML=a.trim(),d===!0?u.children:u.firstChild},g=function(a,d){var u=a.children;return u.length===1&&u[0].tagName===d},L=function(a){return(a=a||document.querySelector(".basicLightbox"))!=null&&a.ownerDocument.body.contains(a)===!0};s.visible=L,s.create=function(a,d){var u=function(n,p){var h=c(`
		<div class="basicLightbox `.concat(p.className,`">
			<div class="basicLightbox__placeholder" role="dialog"></div>
		</div>
	`)),w=h.querySelector(".basicLightbox__placeholder");n.forEach(function(S){return w.appendChild(S)});var x=g(w,"IMG"),I=g(w,"VIDEO"),M=g(w,"IFRAME");return x===!0&&h.classList.add("basicLightbox--img"),I===!0&&h.classList.add("basicLightbox--video"),M===!0&&h.classList.add("basicLightbox--iframe"),h}(a=function(n){var p=typeof n=="string",h=n instanceof HTMLElement==1;if(p===!1&&h===!1)throw new Error("Content must be a DOM element/node or string");return p===!0?Array.from(c(n,!0)):n.tagName==="TEMPLATE"?[n.content.cloneNode(!0)]:Array.from(n.children)}(a),d=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if((n=Object.assign({},n)).closable==null&&(n.closable=!0),n.className==null&&(n.className=""),n.onShow==null&&(n.onShow=function(){}),n.onClose==null&&(n.onClose=function(){}),typeof n.closable!="boolean")throw new Error("Property `closable` must be a boolean");if(typeof n.className!="string")throw new Error("Property `className` must be a string");if(typeof n.onShow!="function")throw new Error("Property `onShow` must be a function");if(typeof n.onClose!="function")throw new Error("Property `onClose` must be a function");return n}(d)),y=function(n){return d.onClose(f)!==!1&&function(p,h){return p.classList.remove("basicLightbox--visible"),setTimeout(function(){return L(p)===!1||p.parentElement.removeChild(p),h()},410),!0}(u,function(){if(typeof n=="function")return n(f)})};d.closable===!0&&u.addEventListener("click",function(n){n.target===u&&y()});var f={element:function(){return u},visible:function(){return L(u)},show:function(n){return d.onShow(f)!==!1&&function(p,h){return document.body.appendChild(p),setTimeout(function(){requestAnimationFrame(function(){return p.classList.add("basicLightbox--visible"),h()})},10),!0}(u,function(){if(typeof n=="function")return n(f)})},close:y};return f}},{}]},{},[1])(1)})});var se="@vercel/analytics",de="1.5.0",ue=()=>{window.va||(window.va=function(...l){(window.vaq=window.vaq||[]).push(l)})};function V(){return typeof window<"u"}function F(){try{let e="production";if(e==="development"||e==="test")return"development"}catch{}return"production"}function fe(e="auto"){if(e==="auto"){window.vam=F();return}window.vam=e}function he(){return(V()?window.vam:F())||"production"}function N(){return he()==="development"}function me(e){return e.scriptSrc?e.scriptSrc:N()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function z(e={debug:!0}){var l;if(!V())return;fe(e.mode),ue(),e.beforeSend&&((l=window.va)==null||l.call(window,"beforeSend",e.beforeSend));let s=me(e);if(document.head.querySelector(`script[src*="${s}"]`))return;let c=document.createElement("script");c.src=s,c.defer=!0,c.dataset.sdkn=se+(e.framework?`/${e.framework}`:""),c.dataset.sdkv=de,e.disableAutoTrack&&(c.dataset.disableAutoTrack="1"),e.endpoint?c.dataset.endpoint=e.endpoint:e.basePath&&(c.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(c.dataset.dsn=e.dsn),c.onerror=()=>{let g=N()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${s}. ${g}`)},N()&&e.debug===!1&&(c.dataset.debug="false"),document.head.appendChild(c)}var K=ce(U());document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".gallery-container"),l=document.getElementById("file-manager-tree"),s=document.querySelector(".sidebar"),c=document.querySelector(".sidebar-toggle"),g=document.getElementById("random-wallpaper-btn"),L=document.getElementById("search-input"),a,d,u=[],y=[],f=0,n=[],p=20,h=0,w=!1,x;if(typeof galleryData>"u"||!galleryData){console.error("Wallpaper data not found. Please ensure 'js/gallery-data.js' is loaded correctly."),e&&(e.innerHTML="<p>Error: Wallpaper data could not be loaded.</p>");return}I();function I(){Q(),M(),u=$(galleryData),D(u),y=[...u],P(galleryData,l),h=0,T(),H();let t=document.createElement("div");t.className="overlay",document.body.appendChild(t),t.addEventListener("click",S)}function M(){c&&c.addEventListener("click",S),g&&g.addEventListener("click",showRandomWallpaper),L&&L.addEventListener("input",handleSearch)}function S(){s.classList.toggle("open"),c.classList.toggle("open")}function Q(){let t=Math.floor(Math.random()*360),i=`hsl(${t}, 80%, 50%)`,o=`hsl(${t}, 15%, 8%)`,r=`hsl(${(t+60)%360}, 15%, 12%)`;document.documentElement.style.setProperty("--accent-color",i),document.documentElement.style.setProperty("--primary-button-bg",i),document.documentElement.style.setProperty("--background-start",o),document.documentElement.style.setProperty("--background-end",r)}function P(t,i){let o=document.createElement("ul");if(o.className="tree-node",i===l){let r=W({name:"All",type:"folder",children:[galleryData]},!0);r.querySelector(".tree-item").classList.add("active"),o.appendChild(r),r.querySelector(".tree-item").addEventListener("click",m=>{m.stopPropagation(),document.querySelectorAll(".tree-item.active").forEach(b=>b.classList.remove("active")),r.querySelector(".tree-item").classList.add("active"),D(u),y=[...u],A(),window.innerWidth<=768&&S()})}t.children&&t.children.filter(r=>r.type==="folder").forEach(r=>{let m=W(r,!1);m&&o.appendChild(m)}),i.innerHTML="",i.appendChild(o)}function W(t,i){if(t.type!=="folder")return null;let o=document.createElement("li");o.className="tree-folder";let r=document.createElement("div");r.className="tree-item";let m=t.children&&t.children.some(v=>v.type==="folder"),b="";m&&(b='<svg class="chevron" viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>');let E='<svg class="icon-folder" viewBox="0 0 24 24"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path></svg>',_='<svg class="icon-folder-open" viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>';if(r.innerHTML=`
            ${b}
            <span class="icon">${E}${_}</span>
            <span class="name">${t.name}</span>
        `,o.appendChild(r),r.addEventListener("click",v=>{v.stopPropagation(),i?(document.querySelectorAll(".tree-item.active").forEach(q=>q.classList.remove("active")),r.classList.add("active"),A()):J(t,r),m&&o.classList.toggle("open")}),m){let v=document.createElement("div");v.className="tree-children",P(t,v),o.appendChild(v)}return o}function J(t,i){document.querySelectorAll(".tree-item.active").forEach(o=>o.classList.remove("active")),i.classList.add("active"),y=$(t),A(),window.innerWidth<=768&&S()}function $(t){let i=[];return t.type==="file"?[t]:(t.children&&t.children.forEach(o=>{i=i.concat($(o))}),i)}function D(t){for(let i=t.length-1;i>0;i--){let o=Math.floor(Math.random()*(i+1));[t[i],t[o]]=[t[o],t[i]]}}function X(t){e&&(t.forEach((i,o)=>{let r=Y(i,h+o);e.appendChild(r)}),h+=t.length,e.classList.toggle("single-item",y.length===1),h>=y.length&&x&&x.disconnect())}function T(){if(w||h>=y.length)return;w=!0;let t=y.slice(h,h+p);t.length>0?X(t):h===0&&(e.innerHTML='<p style="text-align: center; width: 100%;">No wallpapers to display in this category.</p>'),w=!1}function H(){x&&x.disconnect(),x=new IntersectionObserver(i=>{i[0].isIntersecting&&!w&&T()},{rootMargin:"200px"});let t=e.lastElementChild;t?x.observe(t):x.observe(e)}function A(){e.innerHTML="",h=0,w=!1,T(),H()}function Y(t,i){let o=document.createElement("div");o.className="gallery-item";let r=document.createElement("a");r.href=t.full,r.setAttribute("aria-label",`View wallpaper ${t.name}`),r.addEventListener("click",E=>{E.preventDefault(),Z(y,i)});let m=new Image;m.src=t.thumbnail,m.alt=`Wallpaper: ${t.name}`,o.classList.add("loading"),m.onload=()=>{let E=m.naturalWidth/m.naturalHeight;E<.8?o.classList.add("portrait"):E>2&&o.classList.add("ultrawide"),o.classList.remove("loading"),o.classList.add("loaded")},m.onerror=()=>{o.innerHTML="<span>Image failed to load</span>",o.classList.add("error"),o.classList.remove("loading")};let b=document.createElement("div");return b.className="wallpaper-title",b.textContent=t.name.split(".").slice(0,-1).join("."),r.appendChild(m),o.appendChild(r),o.appendChild(b),o}function O(){!a||!a.visible()||(f=(f+1)%n.length,k(n[f]))}function R(){!a||!a.visible()||(f=(f-1+n.length)%n.length,k(n[f]))}function Z(t,i){if(!t||t.length===0)return;n=t,f=i;let o=n[f];if(a){a.visible()||a.show(),k(o);return}let r=ee(o);a=K.create(r,{onShow:m=>{let b=m.element();b.querySelector(".basicLightbox__placeholder").querySelectorAll(".lightbox-details, .lightbox-prev, .lightbox-next").forEach(v=>b.appendChild(v)),b.querySelector(".lightbox-prev").onclick=R,b.querySelector(".lightbox-next").onclick=O,d=v=>{v.key==="ArrowLeft"&&R(),v.key==="ArrowRight"&&O()},document.addEventListener("keydown",d)},onClose:()=>{document.removeEventListener("keydown",d)}}),a.show(()=>{k(o)})}function k(t){if(!a)return;let i=a.element(),o=i.querySelector(".lightbox-content"),r=o.querySelector("img"),m=i.querySelector(".wallpaper-name"),b=i.querySelector(".wallpaper-resolution"),E=i.querySelector(".download-btn");o.classList.add("loading"),r.src=t.thumbnail,r.alt=`Thumbnail for ${t.name}`,m.textContent=t.name.split(".").slice(0,-1).join("."),b.textContent="Loading full resolution...",E.href=t.full;let _=new Image;_.src=t.full,_.onload=()=>{r.src=_.src,r.alt=t.name.split(".").slice(0,-1).join("."),o.classList.remove("loading"),b.textContent=`${_.naturalWidth}x${_.naturalHeight}`;let v=(f+1)%n.length,q=(f-1+n.length)%n.length;v!==f&&(new Image().src=n[v].full),q!==f&&(new Image().src=n[q].full)},_.onerror=()=>{o.classList.remove("loading"),b.textContent="Full image failed to load."}}function ee(t){return`
            <div class="lightbox-content">
                <div class="loader"></div>
                <img src="" alt="">
            </div>
            <div class="lightbox-details">
                <div class="wallpaper-info">
                    <span class="wallpaper-name">${t.name.split(".").slice(0,-1).join(".")}</span>
                    <span class="wallpaper-resolution"></span>
                </div>
                <a href="${t.full}" download class="download-btn">Download</a>
            </div>
            <button class="lightbox-prev">&lt;</button>
            <button class="lightbox-next">&gt;</button>
        `}});z();})();
